{
    "version": "2.5.46",
    "description": "夸克网盘是夸克推出的一款云服务产品，功能包括云存储、高清看剧、文件在线解压、PDF一键转换等。通过夸克网盘可随时随地管理和使用照片、文档、手机资料，目前支持Android、iOS、PC、iPad。",
    "homepage": "https://pan.quark.cn",
    "license": "https://b.quark.cn/apps/quark_icloud_pay/routes/service_help",
    "url": "https://webcdn.m.qq.com/spcmgr/download/QuarkCloudDrive-v2.5.46-release-pckk@tencent_daily-20230822152717.exe#/dl.7z",
    "hash": "529c24ff3fd9a160491267536e7131c5d9c4c8bb5e418478daa3ef1a76efdd66",
    "innosetup": true,
    "installer": {
        "script": [
            "$PersistCache = \"$persist_dir\\Cache\"",
            "$AppCache = \"$env:APPDATA\\quark-cloud-drive\"",
            "if(!(Test-Path $PersistCache)) { New-Item $PersistCache -Type Directory -Force | Out-Null }",
            "if(Test-Path $AppCache) {",
            "    $AppDir = Get-Item $AppCache",
            "    if($AppDir.Attributes -ne \"Directory, ReparsePoint\") { ",
            "        Move-Item $AppCache $PersistCache -Force",
            "        Remove-Item $AppCache -Force -Recurse -ErrorAction SilentlyContinue",
            "        New-Item -Type Junction -Path $AppCache -Target $PersistCache | Out-Null",
            "    }",
            "} else {",
            "    New-Item -Type Junction -Path $AppCache -Target $PersistCache | Out-Null",
            "}"
        ]
    },
    "bin": "QuarkCloudDrive.exe",
    "shortcuts": [
        [
            "QuarkCloudDrive.exe",
            "QuarkCloudDrive"
        ]
    ],
    "checkver": {
        "script": [
            "$params='cmdid=3318&jprxReq[req][soft_id_list][]=24833'",
            "$ret=Invoke-WebRequest -UseBasicParsing https://luban.m.qq.com/api/public/software-manager/softwareProxy -ContentType 'application/x-www-form-urlencoded;charset=UTF-8' -Method POST -Body $params",
            "$ret.Content -match 'https://sw.pcmgr.qq.com/([a-zA-Z0-9]+)/([a-zA-Z0-9]+)/spcmgr/download/QuarkCloudDrive-v([0-9.]+)-release-pckk@tencent_daily-([a-zA-Z0-9]+).exe'",
            "$str = $matches[1] + '-' + $matches[2] + '-' + $matches[3] + '-' + $matches[4]",
            "echo $str"
        ],
        "regex": "(?<pathx>[a-zA-Z0-9]+)-(?<pathy>[a-zA-Z0-9]+)-(?<version>[0-9.]+)-(?<verx>[a-zA-Z0-9]+)"
    },
    "autoupdate": {
        "url": "https://sw.pcmgr.qq.com/$matchPathx/$matchPathy/spcmgr/download/QuarkCloudDrive-v$matchVersion-release-pckk@tencent_daily-$matchVerx.exe#/dl.7z"
    }
}
